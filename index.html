<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>New Year</title>
  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --muted: rgba(255,255,255,.65);
      --grid: rgba(255,255,255,.08);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: "Impact", "Haettenschweiler", "Arial Black", "Franklin Gothic Heavy", system-ui, sans-serif;
      letter-spacing: .2px;
      overflow:hidden;
    }

    /* Swiss-ish grid background (subtle) */
    .bg-grid{
      position:fixed; inset:0;
      background:
        linear-gradient(to right, var(--grid) 1px, transparent 1px),
        linear-gradient(to bottom, var(--grid) 1px, transparent 1px);
      background-size: 48px 48px;
      opacity:.6;
      pointer-events:none;
    }

    /* Layout */
    .wrap{
      position:relative;
      height:100%;
      display:grid;
      grid-template-columns: 1fr minmax(0, 720px) 1fr;
      padding: 24px;
    }
    .main{
      grid-column:2;
      display:grid;
      grid-template-rows:auto auto 1fr auto;
      gap: 18px;
      align-content:start;
      padding-top: 28px;
    }

    .kicker{
      font-size: 14px;
      text-transform: uppercase;
      color: var(--muted);
    }
    h1{
      margin:0;
      font-size: clamp(34px, 5vw, 64px);
      line-height: .95;
      text-transform: uppercase;
    }
    .msg{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 16px;
      line-height: 1.55;
      white-space: pre-wrap; /* allows paragraph length */
      max-width: 68ch;
      color: rgba(255,255,255,.92);
    }
    .hint{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color: var(--muted);
      font-size: 13px;
    }

    /* Confetti canvas */
    canvas{
      position:fixed; inset:0;
      pointer-events:none;
    }

    /* Mobile spacing */
    @media (max-width: 820px){
      .wrap{ grid-template-columns: 1fr; padding: 18px; }
      .main{ grid-column:1; padding-top: 18px; }
      .msg{ font-size: 15px; }
    }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      .bg-grid{ opacity:.35; }
    }
  </style>
</head>
<body>
  <div class="bg-grid" aria-hidden="true"></div>
  <canvas id="c"></canvas>

  <div class="wrap">
    <div class="main">
      <div class="kicker" id="kicker">Tap anywhere for confetti</div>
      <h1 id="title">Happy New Year.</h1>
      <div class="msg" id="message"></div>
      <div class="hint" id="hint"></div>
    </div>
  </div>

  <script>
    // ------------- Personalised messages -------------
    // Keys must match ?to=____ in the URL
    const MESSAGES = {
      choekyi: {
        title: "Happy New Year, Choekyi.",
        text:
`I‚Äôm really grateful I met you.
Thank you for seeing me without trying to fix me, and for being gentle without judging.
You‚Äôve helped me untangle more than you know.
Wishing you a year that feels protected, lucky, and full.`
      },

      yash: {
        title: "Happy New Year, Yash.",
        text:
`Grateful I met you this year.
New friendships don‚Äôt always happen easily as adults. This one did.
Thanks for the push and the example. You‚Äôve genuinely made me want to go after my own dreams harder.`
      },

      pema: {
        title: "Happy New Year, Pema.",
        text:
`Bro‚Ä¶ you‚Äôve been running all year and you‚Äôre still somehow slower than me and I haven‚Äôt run a 5K in ages. üò≠
Keep it up though. I‚Äôm expecting you to level up and become my family doctor soon fucker. But no pressure.`
      },

      enoch: {
        title: "Happy New Year, Enoch.",
        text:
`Really glad we connected this year; shoutout Sagun for the link-up.
I‚Äôve loved the long talks at Zongri. It‚Äôs been real, and it‚Äôs helped.
Wishing you a solid, steady year.`
      },

      sagun: {
        title: "Happy New Year, Sagun.",
        text:
`This year it was honestly fun reconnecting.
Somehow between you, Sim, and Tenchung, I talked to you the least but I think that just set us up for a deeper link when it finally happened.
I love how we can talk and dissect our childhood like it‚Äôs a documentary.
May next year bring you a lot of ‚ÄúSaaaguuuunnn.‚Äù`
      },

      shreya: {
        title: "Happy New Year, Shreya.",
        text:
`I‚Äôm really glad I got to know you this year.
I still owe you that coffee from today.
Wishing you a year full of luck, prosperity, and good surprises.`
      },

      simran: {
        title: "Happy New Year, Sim.",
        text:
`Thank you for being a constant ever since I‚Äôve been back from America.
I don‚Äôt say it enough, but I really appreciate you.
Also thank you for leading the way with the big life milestones. Watching you take real steps gives me courage.
Wishing you a year full of luck, prosperity, and blessings.`
      },

      tenchung: {
        title: "Happy New Year, Tenchung.",
        text:
`I‚Äôm really grateful our friendship properly formed after I came back from America.
I‚Äôve learned a lot from you especially how you let yourself feel things fully, without judging yourself for it.
That‚Äôs something I‚Äôm taking with me into this year.`
      },

      kitsho: {
        title: "Happy New Year, Kitsho.",
        text:
`Hope you have a beautiful new year.
I‚Äôve learned a lot from you, and I really admire your honesty and your kindness.
Wishing you a strong, peaceful year ahead.`
      },

      sherap: {
        title: "Happy New Year, Sherap.",
        text:
`Really grateful for our friendship.
Wishing you a year full of blessings and a lot of laughter.`
      },

      aditi: {
        title: "Happy New Year, Aditi.",
        text:
`Hey babymama, happy new year. üòå
Please take care of the in-laws for me.
Wishing you a year full of blessings and prosperity.`
      },

      sanskruti: {
        title: "Happy New Year, Sanskruti.",
        text:
`You need to stop sending me ‚Äúfat guy‚Äù reels. üò≠
With that being said wishing you a year full of blessings and prosperity.
And keep up the great work too.`
      },

      mosesda: {
        title: "Happy New Year, Moses Da.",
        text:
`Hope the new year brings you loads of luck and prosperity.
Wishing you a strong year ahead.`
      },

      aj_sensorium: {
        title: "Happy New Year, AJ & Sensorium.",
        text:
`May the new year bring you more work, more money, more blessings
and less drama.`
      },

      pema_madhavi_kuna: {
        title: "Happy New Year, Pema, Maddhi & Kuna.",
        text:
`May the new year bring you more projects you actually want to work on,
more blessings, and more money.`
      }
    };

    // Fallback message
    const DEFAULT = {
      title: "Happy New Year.",
      text:
`Wishing you a clean start, good health, and momentum.
Tap anywhere for confetti.`
    };

    // Read URL param ?to=
    const params = new URLSearchParams(location.search);
    const key = (params.get("to") || "").toLowerCase().trim();

    const data = MESSAGES[key] || DEFAULT;

    document.getElementById("title").textContent = data.title;
    document.getElementById("message").textContent = data.text;

    // Optional hint that shows the exact link key (useful for you while testing)
    const hint = document.getElementById("hint");
    hint.textContent = MESSAGES[key] ? "" : "Tip: add ?to=choekyi (or others) to the link";

    // ------------- Lightweight confetti (tap/click to pop) -------------
    const canvas = document.getElementById("c");
    const ctx = canvas.getContext("2d");

    function resize(){
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      canvas.width = Math.floor(innerWidth * dpr);
      canvas.height = Math.floor(innerHeight * dpr);
      canvas.style.width = innerWidth + "px";
      canvas.style.height = innerHeight + "px";
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    window.addEventListener("resize", resize, {passive:true});
    resize();

    const confetti = [];
    const COLORS = ["#fff"]; // black/white scheme

    function pop(x,y,amount=90){
      for(let i=0;i<amount;i++){
        confetti.push({
          x, y,
          vx: (Math.random()-0.5)*10,
          vy: (Math.random()-1.2)*12,
          g: 0.35 + Math.random()*0.2,
          s: 2 + Math.random()*4,
          r: Math.random()*Math.PI*2,
          vr: (Math.random()-0.5)*0.25,
          life: 90 + Math.random()*40,
          color: COLORS[0],
          shape: Math.random() < 0.5 ? "rect" : "line"
        });
      }
    }

    function step(){
      ctx.clearRect(0,0,innerWidth,innerHeight);

      for(let i=confetti.length-1;i>=0;i--){
        const p = confetti[i];
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.r += p.vr;
        p.life -= 1;

        // fade out near the end
        const alpha = Math.max(0, Math.min(1, p.life/60));
        ctx.globalAlpha = alpha;
        ctx.strokeStyle = p.color;
        ctx.fillStyle = p.color;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.r);

        if(p.shape === "rect"){
          ctx.fillRect(-p.s/2, -p.s/2, p.s*1.2, p.s*0.8);
        }else{
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(-p.s, 0);
          ctx.lineTo(p.s, 0);
          ctx.stroke();
        }
        ctx.restore();

        if(p.life <= 0 || p.y > innerHeight + 60) confetti.splice(i,1);
      }
      ctx.globalAlpha = 1;
      requestAnimationFrame(step);
    }
    step();

    // Desktop click
    window.addEventListener("pointerdown", (e)=>{
      pop(e.clientX, e.clientY, 80);
    }, {passive:true});

    // Small ‚Äúauto‚Äù pop on load (very light)
    setTimeout(()=>pop(innerWidth*0.25, innerHeight*0.35, 60), 250);
    setTimeout(()=>pop(innerWidth*0.65, innerHeight*0.45, 60), 450);
  </script>
</body>
</html>
